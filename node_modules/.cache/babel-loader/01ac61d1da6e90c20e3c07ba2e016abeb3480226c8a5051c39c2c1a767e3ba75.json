{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useRef, useState } from 'react';\nimport { isImageValid } from \"../util\";\nexport default function useStatus(_ref) {\n  var src = _ref.src,\n    isCustomPlaceholder = _ref.isCustomPlaceholder,\n    fallback = _ref.fallback;\n  var _useState = useState(isCustomPlaceholder ? 'loading' : 'normal'),\n    _useState2 = _slicedToArray(_useState, 2),\n    status = _useState2[0],\n    setStatus = _useState2[1];\n  var isLoaded = useRef(false);\n  var isError = status === 'error';\n\n  // https://github.com/react-component/image/pull/187\n  useEffect(function () {\n    isImageValid(src).then(function (isValid) {\n      if (!isValid) {\n        setStatus('error');\n      }\n    });\n  }, [src]);\n  useEffect(function () {\n    if (isCustomPlaceholder && !isLoaded.current) {\n      setStatus('loading');\n    } else if (isError) {\n      setStatus('normal');\n    }\n  }, [src]);\n  var onLoad = function onLoad() {\n    setStatus('normal');\n  };\n  var getImgRef = function getImgRef(img) {\n    isLoaded.current = false;\n    if (status !== 'loading') {\n      return;\n    }\n    if (img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\n      isLoaded.current = true;\n      onLoad();\n    }\n  };\n  var srcAndOnload = isError && fallback ? {\n    src: fallback\n  } : {\n    onLoad: onLoad,\n    src: src\n  };\n  return [getImgRef, srcAndOnload, status];\n}","map":{"version":3,"names":["_slicedToArray","useEffect","useRef","useState","isImageValid","useStatus","_ref","src","isCustomPlaceholder","fallback","_useState","_useState2","status","setStatus","isLoaded","isError","then","isValid","current","onLoad","getImgRef","img","complete","naturalWidth","naturalHeight","srcAndOnload"],"sources":["C:/Users/jaimeen/fashin-buzz/FabFusion/node_modules/rc-image/es/hooks/useStatus.js"],"sourcesContent":["import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\r\nimport { useEffect, useRef, useState } from 'react';\r\nimport { isImageValid } from \"../util\";\r\nexport default function useStatus(_ref) {\r\n  var src = _ref.src,\r\n    isCustomPlaceholder = _ref.isCustomPlaceholder,\r\n    fallback = _ref.fallback;\r\n  var _useState = useState(isCustomPlaceholder ? 'loading' : 'normal'),\r\n    _useState2 = _slicedToArray(_useState, 2),\r\n    status = _useState2[0],\r\n    setStatus = _useState2[1];\r\n  var isLoaded = useRef(false);\r\n  var isError = status === 'error';\r\n\r\n  // https://github.com/react-component/image/pull/187\r\n  useEffect(function () {\r\n    isImageValid(src).then(function (isValid) {\r\n      if (!isValid) {\r\n        setStatus('error');\r\n      }\r\n    });\r\n  }, [src]);\r\n  useEffect(function () {\r\n    if (isCustomPlaceholder && !isLoaded.current) {\r\n      setStatus('loading');\r\n    } else if (isError) {\r\n      setStatus('normal');\r\n    }\r\n  }, [src]);\r\n  var onLoad = function onLoad() {\r\n    setStatus('normal');\r\n  };\r\n  var getImgRef = function getImgRef(img) {\r\n    isLoaded.current = false;\r\n    if (status !== 'loading') {\r\n      return;\r\n    }\r\n    if (img !== null && img !== void 0 && img.complete && (img.naturalWidth || img.naturalHeight)) {\r\n      isLoaded.current = true;\r\n      onLoad();\r\n    }\r\n  };\r\n  var srcAndOnload = isError && fallback ? {\r\n    src: fallback\r\n  } : {\r\n    onLoad: onLoad,\r\n    src: src\r\n  };\r\n  return [getImgRef, srcAndOnload, status];\r\n}"],"mappings":"AAAA,OAAOA,cAAc,MAAM,0CAA0C;AACrE,SAASC,SAAS,EAAEC,MAAM,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,YAAY,QAAQ,SAAS;AACtC,eAAe,SAASC,SAASA,CAACC,IAAI,EAAE;EACtC,IAAIC,GAAG,GAAGD,IAAI,CAACC,GAAG;IAChBC,mBAAmB,GAAGF,IAAI,CAACE,mBAAmB;IAC9CC,QAAQ,GAAGH,IAAI,CAACG,QAAQ;EAC1B,IAAIC,SAAS,GAAGP,QAAQ,CAACK,mBAAmB,GAAG,SAAS,GAAG,QAAQ,CAAC;IAClEG,UAAU,GAAGX,cAAc,CAACU,SAAS,EAAE,CAAC,CAAC;IACzCE,MAAM,GAAGD,UAAU,CAAC,CAAC,CAAC;IACtBE,SAAS,GAAGF,UAAU,CAAC,CAAC,CAAC;EAC3B,IAAIG,QAAQ,GAAGZ,MAAM,CAAC,KAAK,CAAC;EAC5B,IAAIa,OAAO,GAAGH,MAAM,KAAK,OAAO;;EAEhC;EACAX,SAAS,CAAC,YAAY;IACpBG,YAAY,CAACG,GAAG,CAAC,CAACS,IAAI,CAAC,UAAUC,OAAO,EAAE;MACxC,IAAI,CAACA,OAAO,EAAE;QACZJ,SAAS,CAAC,OAAO,CAAC;MACpB;IACF,CAAC,CAAC;EACJ,CAAC,EAAE,CAACN,GAAG,CAAC,CAAC;EACTN,SAAS,CAAC,YAAY;IACpB,IAAIO,mBAAmB,IAAI,CAACM,QAAQ,CAACI,OAAO,EAAE;MAC5CL,SAAS,CAAC,SAAS,CAAC;IACtB,CAAC,MAAM,IAAIE,OAAO,EAAE;MAClBF,SAAS,CAAC,QAAQ,CAAC;IACrB;EACF,CAAC,EAAE,CAACN,GAAG,CAAC,CAAC;EACT,IAAIY,MAAM,GAAG,SAASA,MAAMA,CAAA,EAAG;IAC7BN,SAAS,CAAC,QAAQ,CAAC;EACrB,CAAC;EACD,IAAIO,SAAS,GAAG,SAASA,SAASA,CAACC,GAAG,EAAE;IACtCP,QAAQ,CAACI,OAAO,GAAG,KAAK;IACxB,IAAIN,MAAM,KAAK,SAAS,EAAE;MACxB;IACF;IACA,IAAIS,GAAG,KAAK,IAAI,IAAIA,GAAG,KAAK,KAAK,CAAC,IAAIA,GAAG,CAACC,QAAQ,KAAKD,GAAG,CAACE,YAAY,IAAIF,GAAG,CAACG,aAAa,CAAC,EAAE;MAC7FV,QAAQ,CAACI,OAAO,GAAG,IAAI;MACvBC,MAAM,CAAC,CAAC;IACV;EACF,CAAC;EACD,IAAIM,YAAY,GAAGV,OAAO,IAAIN,QAAQ,GAAG;IACvCF,GAAG,EAAEE;EACP,CAAC,GAAG;IACFU,MAAM,EAAEA,MAAM;IACdZ,GAAG,EAAEA;EACP,CAAC;EACD,OAAO,CAACa,SAAS,EAAEK,YAAY,EAAEb,MAAM,CAAC;AAC1C"},"metadata":{},"sourceType":"module","externalDependencies":[]}